# Dizionario esistente
relazioni =   [
    {'nome_relazione': 'bus_survey', 'id_relazione': 'bus_survey_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'bus_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'commercial_survey', 'id_relazione': 'commercial_id_building_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'commercial_survey', 'chiave_padre': 'id_building', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'communication infrastructure', 'id_relazione': 'communicat_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'communication_infrastructure', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'cultural', 'id_relazione': 'cultural_s_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'cultural-survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'drinking_water', 'id_relazione': 'drinking_w_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'drinking_water_source', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'education survey', 'id_relazione': 'educationa_id_building_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'educational_survey', 'chiave_padre': 'id_building', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'electrical substation', 'id_relazione': 'electrical_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'electrical_substation', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'photo', 'id_relazione': 'foto_6fcf4_external_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'foto', 'chiave_padre': 'external_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'green areas', 'id_relazione': 'green_area_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'green_areas_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'health', 'id_relazione': 'health_cen_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'health_centre', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'Hospital survey', 'id_relazione': 'hospital_s_id_building_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'hospital_survey', 'chiave_padre': 'id_building', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'industrial form', 'id_relazione': 'industrial_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'industrial_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'Parking survey', 'id_relazione': 'parking_su_id_building_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'parking_survey', 'chiave_padre': 'id_building', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'power plants', 'id_relazione': 'power_plan_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'power_plant', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'public_building', 'id_relazione': 'public_bui_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'public_building', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'recreational', 'id_relazione': 'recreation_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'recreational', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'religious', 'id_relazione': 'religious__building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'religious_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'Reservoir survey', 'id_relazione': 'reservoir__id_building_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'reservoir_survey', 'chiave_padre': 'id_building', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'Socio economic survey', 'id_relazione': 'socio_econ_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'socio_economic_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'solid waste survey', 'id_relazione': 'solid_wast_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'solid_waste_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'tourism survey', 'id_relazione': 'tourism_96_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'tourism', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'transmission_tower', 'id_relazione': 'transmissi_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'transmission_tower', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'WTP', 'id_relazione': 'water_surv_id_building_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'water_survey', 'chiave_padre': 'id_building', 'chiave_figlio': 'building_id'},
    {'nome_relazione': 'WWTP', 'id_relazione': 'wwtp_surve_building_id_buildingd__building_id', 'nome_layer_padre': 'building', 'nome_layer_figlio': 'wwtp_survey', 'chiave_padre': 'building_id', 'chiave_figlio': 'building_id'},
]



# Lista dei layer a cui vogliamo applicare le modifiche
layer_names = [
    '00 building total', '01 Building surveyor', '02 Built /unbuilt', '03 Status', 
    '04 Status and Operating', '05 Floors', '06 Legal illegal', 
    '07 Land property', '08 Land use vs old land use', '09 Unbuilt type', '10 Commercial'
]

# Lista per salvare tutte le nuove relazioni modificate per ciascun layer
nuove_relazioni = []

# Itera attraverso il dizionario esistente
for relazione in relazioni:
    # Controlla se il nome del layer padre Ã¨ "building" per modificarlo
    if relazione['nome_layer_padre'] == 'building':
        for i, layer_name in enumerate(layer_names):
            # Crea una nuova relazione con il nome del layer corrente
            nuova_relazione = {
                'nome_relazione': f'{str(i).zfill(2)}_' + relazione['nome_relazione'],  # Aggiungi l'indice come prefisso (01, 02, ecc.)
                'id_relazione': f'{str(i).zfill(2)}_' + relazione['id_relazione'],  # Aggiungi l'indice anche all'id_relazione
                'nome_layer_padre': layer_name,  # Cambia il nome del layer padre con il nome corrente
                'nome_layer_figlio': relazione['nome_layer_figlio'],  # Mantieni il layer figlio
                'chiave_padre': relazione['chiave_padre'],  # Mantieni la chiave padre
                'chiave_figlio': relazione['chiave_figlio']  # Mantieni la chiave figlio
            }
            nuove_relazioni.append(nuova_relazione)

# Combina le nuove relazioni con quelle originali
relazioni_aggiornate = relazioni + nuove_relazioni

# Stampa o utilizza le nuove relazioni aggiornate
for relazione in relazioni_aggiornate:
    print(relazione)
